<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>割り算をして商を切り上げた値がほしい | kasumi8pon</title><meta property="twitter:card" content="summary"/><meta property="twitter:title" content="割り算をして商を切り上げた値がほしい | kasumi8pon"/><meta property="twitter:image" content="https://kasumi8pon.net/images/kasumi8pon.jpg"/><meta property="twitter:creator" content="@kasumi8pon"/><meta property="og:title" content="割り算をして商を切り上げた値がほしい | kasumi8pon"/><meta property="og:description" content="割る数 -1 を割られる数に足す。"/><meta property="og:img" content="https://kasumi8pon.net/images/kasumi8pon.jpg"/><meta property="og:url" content="https://kasumi8pon.net/posts/ceiling-of-division"/><link rel="alternate" type="application/rss+xml" title="kasumi8pon" href="https://kasumi8pon.net/feed.xml"/><meta name="next-head-count" content="12"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FFSPS63VBD"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-FFSPS63VBD');
          </script><link rel="preload" href="/_next/static/css/73215d649899bb04.css" as="style"/><link rel="stylesheet" href="/_next/static/css/73215d649899bb04.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-d7b038a63b619762.js" defer=""></script><script src="/_next/static/chunks/framework-7dc8a65f4a0cda33.js" defer=""></script><script src="/_next/static/chunks/main-fc7d2f0e2098927e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-43ac001d99fedbd3.js" defer=""></script><script src="/_next/static/chunks/814-5321687895e5b29b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-a73e1c619499e485.js" defer=""></script><script src="/_next/static/pcZRq5a8T0GG0jVLI4dmm/_buildManifest.js" defer=""></script><script src="/_next/static/pcZRq5a8T0GG0jVLI4dmm/_ssgManifest.js" defer=""></script><script src="/_next/static/pcZRq5a8T0GG0jVLI4dmm/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="h-full"><header class="flex justify-center items-center h-28 bg-red-100"><div class="max-w-2xl w-full pl-3 pr-3 text-3xl font-bold text-center"><a href="/">kasumi8pon</a></div></header><main class="min-h-[calc(100%-14.25rem)]"><div class="flex justify-center pt-10 pb-10"><div class="max-w-2xl w-full pl-3 pr-3"><div><div><h1>割り算をして商を切り上げた値がほしい</h1><div class="font-serif">2023-07-05</div></div><div class="pt-5 markdown"><p>Rust で<a href="https://atcoder.jp/contests/abc302/tasks/abc302_a">ABC302 の A 問題</a>を解いていて、割り算をして商を切り上げた値がほしくなった。</p>
<p>Ruby なら以下のように書いていた。</p>
<pre><code class="language-ruby">a = 3
b = 2

(a / b.to_f).ceil
</code></pre>
<p>Rust で同じロジックで書こうとするとこうなる。</p>
<pre><code class="language-Rust">let a: i32 = 3;
let b: i32 = 2;

(a as f64 / b as f64).ceil() as i32;
</code></pre>
<p>型変換が多くて大変。</p>
<p>剰余があるときに商を 1 足すことはできる。</p>
<pre><code class="language-rust">let (div, rem) = (a / b, a % b);
let ceil;
if rem == 0 { ceil = div } else { ceil = div + 1 }
</code></pre>
<p>でも、あんまり <code>if</code> 書きたくないなあ。</p>
<p>他の人の提出を見ていたら、こんなふうに書いてる人が多かった。</p>
<pre><code class="language-rust">(a + b - 1)/ b;
</code></pre>
<p>割る数 - 1 を割られる数に足している。</p>
<p>もともと割り切れる場合は、割る数 - 1 を足しても、商の数は変わらない。</p>
<p>余りがある場合は、余りは 1 以上なので、割る数 - 1 を足すと商が 1 大きくなって切り上げの値になる。</p>
<p>なるほど、言われてみればたしかに！</p>
<p>このあたりは、num-integer を使うことでも書ける。
<code>div_rem</code> があって、</p>
<pre><code class="language-rust">let (div, rem) = (a / b, a % b);
</code></pre>
<p>は</p>
<pre><code class="language-rust">let (div, rem) = a.div_rem(&#x26;b);
</code></pre>
<p>と書ける。
<a href="https://docs.rs/num-integer/latest/num_integer/trait.Integer.html#tymethod.div_rem">https://docs.rs/num-integer/latest/num_integer/trait.Integer.html#tymethod.div_rem</a></p>
<p>また、num-integer には <code>divceil</code> というメソッドがある。</p>
<pre><code class="language-rust">integer::div_ceil(a, b);
</code></pre>
<p><a href="https://docs.rs/num-integer/latest/num_integer/fn.div_ceil.html">https://docs.rs/num-integer/latest/num_integer/fn.div_ceil.html</a>
これがまさに欲しかったもの！</p>
<p>でも、競プロやる上ではメソッドを知らないこともあるので、こういう Tips を引き出しに入れておいてもいいなと思った。他の言語でも使えるしね。</p>
<p>ちなみに <code>divmod</code> の気持ちで Rust で余りの変数に <code>mod</code> としようとしたところ、予約語だということを学んだ。
<a href="https://doc.rust-jp.rs/book-ja/appendix-01-keywords.html">https://doc.rust-jp.rs/book-ja/appendix-01-keywords.html</a></p>
</div></div></div></div></main><footer class="flex justify-center items-center h-28 bg-red-100"><div class="flex justify-end max-w-2xl w-full pl-3 pr-3"><img src="/images/kasumi8pon.jpg" alt="kasumi8pon&#x27;s icon, Ponta in front of seibu dome" class="w-10 rounded-full"/></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"割り算をして商を切り上げた値がほしい","date":"2023-07-05T23:27:10.742+09:00","description":"割る数 -1 を割られる数に足す。","image":null,"published":true,"content":"\u003cp\u003eRust で\u003ca href=\"https://atcoder.jp/contests/abc302/tasks/abc302_a\"\u003eABC302 の A 問題\u003c/a\u003eを解いていて、割り算をして商を切り上げた値がほしくなった。\u003c/p\u003e\n\u003cp\u003eRuby なら以下のように書いていた。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ruby\"\u003ea = 3\nb = 2\n\n(a / b.to_f).ceil\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRust で同じロジックで書こうとするとこうなる。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-Rust\"\u003elet a: i32 = 3;\nlet b: i32 = 2;\n\n(a as f64 / b as f64).ceil() as i32;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e型変換が多くて大変。\u003c/p\u003e\n\u003cp\u003e剰余があるときに商を 1 足すことはできる。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-rust\"\u003elet (div, rem) = (a / b, a % b);\nlet ceil;\nif rem == 0 { ceil = div } else { ceil = div + 1 }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eでも、あんまり \u003ccode\u003eif\u003c/code\u003e 書きたくないなあ。\u003c/p\u003e\n\u003cp\u003e他の人の提出を見ていたら、こんなふうに書いてる人が多かった。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-rust\"\u003e(a + b - 1)/ b;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e割る数 - 1 を割られる数に足している。\u003c/p\u003e\n\u003cp\u003eもともと割り切れる場合は、割る数 - 1 を足しても、商の数は変わらない。\u003c/p\u003e\n\u003cp\u003e余りがある場合は、余りは 1 以上なので、割る数 - 1 を足すと商が 1 大きくなって切り上げの値になる。\u003c/p\u003e\n\u003cp\u003eなるほど、言われてみればたしかに！\u003c/p\u003e\n\u003cp\u003eこのあたりは、num-integer を使うことでも書ける。\n\u003ccode\u003ediv_rem\u003c/code\u003e があって、\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-rust\"\u003elet (div, rem) = (a / b, a % b);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eは\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-rust\"\u003elet (div, rem) = a.div_rem(\u0026#x26;b);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eと書ける。\n\u003ca href=\"https://docs.rs/num-integer/latest/num_integer/trait.Integer.html#tymethod.div_rem\"\u003ehttps://docs.rs/num-integer/latest/num_integer/trait.Integer.html#tymethod.div_rem\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eまた、num-integer には \u003ccode\u003edivceil\u003c/code\u003e というメソッドがある。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-rust\"\u003einteger::div_ceil(a, b);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://docs.rs/num-integer/latest/num_integer/fn.div_ceil.html\"\u003ehttps://docs.rs/num-integer/latest/num_integer/fn.div_ceil.html\u003c/a\u003e\nこれがまさに欲しかったもの！\u003c/p\u003e\n\u003cp\u003eでも、競プロやる上ではメソッドを知らないこともあるので、こういう Tips を引き出しに入れておいてもいいなと思った。他の言語でも使えるしね。\u003c/p\u003e\n\u003cp\u003eちなみに \u003ccode\u003edivmod\u003c/code\u003e の気持ちで Rust で余りの変数に \u003ccode\u003emod\u003c/code\u003e としようとしたところ、予約語だということを学んだ。\n\u003ca href=\"https://doc.rust-jp.rs/book-ja/appendix-01-keywords.html\"\u003ehttps://doc.rust-jp.rs/book-ja/appendix-01-keywords.html\u003c/a\u003e\u003c/p\u003e\n","slug":"ceiling-of-division"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"ceiling-of-division"},"buildId":"pcZRq5a8T0GG0jVLI4dmm","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>