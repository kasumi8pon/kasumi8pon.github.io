{"pageProps":{"title":"割り算をして商を切り上げた値がほしい","date":"2023-07-05T23:27:10.742+09:00","description":"割る数 -1 を割られる数に足す。","image":null,"published":true,"content":"<p>Rust で<a href=\"https://atcoder.jp/contests/abc302/tasks/abc302_a\">ABC302 の A 問題</a>を解いていて、割り算をして商を切り上げた値がほしくなった。</p>\n<p>Ruby なら以下のように書いていた。</p>\n<pre><code class=\"language-ruby\">a = 3\nb = 2\n\n(a / b.to_f).ceil\n</code></pre>\n<p>Rust で同じロジックで書こうとするとこうなる。</p>\n<pre><code class=\"language-Rust\">let a: i32 = 3;\nlet b: i32 = 2;\n\n(a as f64 / b as f64).ceil() as i32;\n</code></pre>\n<p>型変換が多くて大変。</p>\n<p>剰余があるときに商を 1 足すことはできる。</p>\n<pre><code class=\"language-rust\">let (div, rem) = (a / b, a % b);\nlet ceil;\nif rem == 0 { ceil = div } else { ceil = div + 1 }\n</code></pre>\n<p>でも、あんまり <code>if</code> 書きたくないなあ。</p>\n<p>他の人の提出を見ていたら、こんなふうに書いてる人が多かった。</p>\n<pre><code class=\"language-rust\">(a + b - 1)/ b;\n</code></pre>\n<p>割る数 - 1 を割られる数に足している。</p>\n<p>もともと割り切れる場合は、割る数 - 1 を足しても、商の数は変わらない。</p>\n<p>余りがある場合は、余りは 1 以上なので、割る数 - 1 を足すと商が 1 大きくなって切り上げの値になる。</p>\n<p>なるほど、言われてみればたしかに！</p>\n<p>このあたりは、num-integer を使うことでも書ける。\n<code>div_rem</code> があって、</p>\n<pre><code class=\"language-rust\">let (div, rem) = (a / b, a % b);\n</code></pre>\n<p>は</p>\n<pre><code class=\"language-rust\">let (div, rem) = a.div_rem(&#x26;b);\n</code></pre>\n<p>と書ける。\n<a href=\"https://docs.rs/num-integer/latest/num_integer/trait.Integer.html#tymethod.div_rem\">https://docs.rs/num-integer/latest/num_integer/trait.Integer.html#tymethod.div_rem</a></p>\n<p>また、num-integer には <code>divceil</code> というメソッドがある。</p>\n<pre><code class=\"language-rust\">integer::div_ceil(a, b);\n</code></pre>\n<p><a href=\"https://docs.rs/num-integer/latest/num_integer/fn.div_ceil.html\">https://docs.rs/num-integer/latest/num_integer/fn.div_ceil.html</a>\nこれがまさに欲しかったもの！</p>\n<p>でも、競プロやる上ではメソッドを知らないこともあるので、こういう Tips を引き出しに入れておいてもいいなと思った。他の言語でも使えるしね。</p>\n<p>ちなみに <code>divmod</code> の気持ちで Rust で余りの変数に <code>mod</code> としようとしたところ、予約語だということを学んだ。\n<a href=\"https://doc.rust-jp.rs/book-ja/appendix-01-keywords.html\">https://doc.rust-jp.rs/book-ja/appendix-01-keywords.html</a></p>\n","slug":"ceiling-of-division"},"__N_SSG":true}